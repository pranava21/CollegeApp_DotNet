name: .NET

on:
  push:
    branches: [ dev_preview ]
  pull_request:
    branches: [ master ]
  workflow_dispatch:
    inputs: 
      logLevel:
        description: 'Log level'     
        required: true
        default: 'warning'
      tags:
        description: 'Test scenario tags'

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: Setup .NET
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 6.0.x
    - name: Restore dependencies, Build and Publish
      run: |
        dotnet publish --configuration Release
    - name: Setup SSH
  # You may pin to the exact commit or the version.
  # uses: kielabokkie/ssh-key-and-known-hosts-action@e5c88dc608851beb90a7a78c7d5d2ef6f62f9860
      uses: kielabokkie/ssh-key-and-known-hosts-action@v1.2.0
      with:
        # Private key required to access the host
        ssh-private-key: ${{ secrets.PRIVATE_KEY }}
        # Hostname or IP to add to the known hosts file
        ssh-host: 192.168.0.170
        # Port for key-scanning the server
        ssh-port: 22
    - name: Copy via ssh
      uses: garygrossgarten/github-action-scp@v0.5.3
      with:
        local: /home/runner/work/CollegeApp_DotNet/CollegeApp_DotNet/CollegeApp_DotNet/bin/Release/net6.0/publish/
        remote: /home/pranava/college_app_test/
        host: 192.169.0.170
        username: pranava
        password: 21071998
        privateKey: ${{ secrets.PRIVATE_KEY }}
    
    
